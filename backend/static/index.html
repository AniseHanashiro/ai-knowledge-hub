<!DOCTYPE html>
<html lang="ja" data-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Knowledge Hub</title>
    <link rel="stylesheet" href="/static/style.css">
</head>

<body>
    <nav class="navbar">
        <div class="brand">
            <span class="brand-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path
                        d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z">
                    </path>
                    <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                    <line x1="12" y1="22.08" x2="12" y2="12"></line>
                </svg>
            </span>
            AI Hub
            <div class="nav-links">
                <a href="/index.html" class="active">ブラウズ</a>
                <a href="/timeline.html">タイムライン</a>
                <a href="/search.html">検索</a>
                <a href="/following.html">フォロー</a>
                <a href="/clips.html">クリップ</a>
            </div>
        </div>

        <div class="search-container">
            <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                stroke-width="2">
                <circle cx="11" cy="11" r="8"></circle>
                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            </svg>
            <input type="text" class="search-bar" id="globalSearch" placeholder="AIで検索... 例：NotebookLMの日本語YouTube動画"
                autocomplete="off">
        </div>

        <div class="toolbar">
            <button class="icon-btn" id="themeToggle" title="テーマ変更">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                </svg>
            </button>
            <button class="icon-btn" title="通知">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                    <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                </svg>
            </button>
            <button class="collect-btn" id="collectBtn" title="手動収集">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polygon points="5 3 19 12 5 21 5 3"></polygon>
                </svg>
                収集実行
            </button>
        </div>
    </nav>

    <div class="container">
        <!-- Sidebar Filters -->
        <aside class="sidebar">
            <div class="filter-section">
                <div class="filter-title">カテゴリ</div>
                <button class="filter-btn active" data-type="category" data-val="all"><span>全て</span></button>
                <button class="filter-btn" data-type="category" data-val="企業トラッカー"><span>企業トラッカー</span> <span
                        class="badge" id="badge-corp">0</span></button>
                <button class="filter-btn" data-type="category" data-val="ツール・ローンチ"><span>ツール・ローンチ</span> <span
                        class="badge" id="badge-tool">0</span></button>
                <button class="filter-btn" data-type="category" data-val="AI活用ハック"><span>AI活用ハック</span> <span
                        class="badge" id="badge-hack">0</span></button>
                <button class="filter-btn" data-type="category" data-val="技術・研究"><span>技術・研究</span> <span class="badge"
                        id="badge-tech">0</span></button>
                <button class="filter-btn" data-type="category" data-val="社会・倫理・政策"><span>社会・倫理・政策</span> <span
                        class="badge" id="badge-soc">0</span></button>
                <button class="filter-btn" data-type="category" data-val="ビジネス・投資"><span>ビジネス・投資</span> <span
                        class="badge" id="badge-biz">0</span></button>
                <button class="filter-btn" data-type="category" data-val="雑多・コラム"><span>雑多・コラム</span> <span
                        class="badge" id="badge-misc">0</span></button>
            </div>

            <div class="filter-section">
                <div class="filter-title">期間</div>
                <button class="filter-btn active" data-type="date" data-val="all">全期間</button>
                <button class="filter-btn" data-type="date" data-val="today">今日</button>
                <button class="filter-btn" data-type="date" data-val="week">今週</button>
                <button class="filter-btn" data-type="date" data-val="month">今月</button>
            </div>

            <div class="filter-section">
                <div class="filter-title">スコア範囲 (<span id="scoreVal">0</span>+)</div>
                <input type="range" id="scoreRange" min="0" max="100" value="0" style="margin-top: 8px;">
            </div>

            <div class="filter-section">
                <div class="filter-title">信頼度</div>
                <div class="trust-toggles">
                    <button class="trust-toggle" data-val="HIGH">HIGH</button>
                    <button class="trust-toggle" data-val="MEDIUM">MEDIUM</button>
                    <button class="trust-toggle" data-val="LOW">LOW</button>
                </div>
            </div>

            <div class="filter-section" style="margin-top: 40px;">
                <div class="filter-title">統計</div>
                <div style="font-size: 0.85rem; color: var(--text-secondary); line-height: 1.8;" id="statsPanel">
                    総記事数: ---<br>
                    今日の記事: ---<br>
                    平均スコア: ---<br>
                    高信頼度: ---
                </div>
            </div>

            <a href="/feed/public" target="_blank"
                style="display: block; margin-top: 24px; padding: 12px; text-align: center; border: 1px dashed var(--border-color); border-radius: 6px; color: var(--text-muted); font-size: 0.85rem;">
                NotebookLM用 HTMLフィード
            </a>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="toolbar-main">
                <div class="results-count" id="resultsCount">データを読み込んでいます...</div>
                <div style="display: flex; gap: 8px;">
                    <select id="sortSelect"
                        style="background: var(--bg-secondary); color: var(--text-primary); border: 1px solid var(--border-color); border-radius: 6px; padding: 6px 12px;">
                        <option value="published_at">最新順</option>
                        <option value="score">スコア順</option>
                    </select>
                </div>
            </div>

            <div id="loading" class="loading" style="display: none;">
                読み込み中...
            </div>

            <div class="articles-grid" id="articlesGrid"></div>

            <div style="text-align: center; margin-top: 32px; display: none;" id="pagination">
                <button class="action-btn" id="prevBtn" style="display: inline-flex; margin-right: 12px;">前へ</button>
                <span id="pageInfo" style="color: var(--text-muted); font-size: 0.9rem;">1 / 1</span>
                <button class="action-btn" id="nextBtn" style="display: inline-flex; margin-left: 12px;">次へ</button>
            </div>
        </main>
    </div>

    <script src="/static/app.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            initBrowseParams();
            loadArticles();
            loadStats();
        });
    </script>
</body>

</html>